import{j as s}from"./vendor-animation-UaI4-h6S.js";import{r as a}from"./vendor-react-D8JIXSvj.js";const M=[...Array(18)].map((d,n)=>({id:n,left:(n*5.56+2)%100,delay:n*.35%5,duration:4+n*.2%3,size:n%3===0?"fast":n%2===0?"slow":""})),A=[{type:"fingerprint",icon:"ðŸ‘",style:{"--rotation":"-20deg"}},{type:"magnifier",icon:"ðŸ”",style:{"--rotation":"15deg"}},{type:"blood",icon:"ðŸ©¸",style:{"--rotation":"-30deg"}},{type:"skull",icon:"ðŸ’€",style:{"--rotation":"-10deg"}}],$=({targetTime:d="2026-02-28T00:00:00",enableSound:n=!1,onComplete:i})=>{const[c,m]=a.useState({days:0,hours:0,minutes:0,seconds:0}),[N,p]=a.useState(!1),[T,h]=a.useState(!1),[j,f]=a.useState(null),[S,y]=a.useState(null),[k,I]=a.useState(null),[D,x]=a.useState(!1),u=a.useRef(-1),o=a.useRef(null),g=a.useCallback(()=>{try{const e=new Date(d);return isNaN(e.getTime())?new Date("2026-02-28T00:00:00"):e}catch(e){return new Date("2026-02-28T00:00:00")}},[d]),l=a.useCallback(()=>{const e=g()-new Date;return e<=0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(e/(1e3*60*60*24)),hours:Math.floor(e/(1e3*60*60)%24),minutes:Math.floor(e/1e3/60%60),seconds:Math.floor(e/1e3%60)}},[g]),v=a.useCallback(()=>{if(!(!n||!o.current))try{const e=o.current,t=e.createOscillator(),r=e.createGain();t.connect(r),r.connect(e.destination),t.frequency.setValueAtTime(800,e.currentTime),t.type="sine",r.gain.setValueAtTime(.01,e.currentTime),r.gain.exponentialRampToValueAtTime(.001,e.currentTime+.1),t.start(e.currentTime),t.stop(e.currentTime+.1)}catch(e){}},[n]);a.useEffect(()=>{const e=setTimeout(()=>p(!0),100);return()=>clearTimeout(e)},[]),a.useEffect(()=>{if(n)try{o.current=new(window.AudioContext||window.webkitAudioContext)}catch(e){}return()=>{o.current&&o.current.close()}},[n]),a.useEffect(()=>{const e=l();m(e),e.days*86400+e.hours*3600+e.minutes*60+e.seconds<=0&&(h(!0),i==null||i())},[l,i]),a.useEffect(()=>{const e=setInterval(()=>{const t=l();m(t);const r=t.days*86400+t.hours*3600+t.minutes*60+t.seconds;if(t.seconds!==u.current&&u.current!==-1){if(v(),f("seconds"),setTimeout(()=>f(null),600),Math.random()>.4){const w=["days","hours","minutes","seconds"];y(w[Math.floor(Math.random()*w.length)]),setTimeout(()=>y(null),150+Math.random()*400)}r<=5&&r>0&&(x(!0),setTimeout(()=>x(!1),600))}u.current=t.seconds,r<=0&&(h(!0),i==null||i(),clearInterval(e))},1e3);return()=>clearInterval(e)},[l,i,v]);const E=[{label:"DAYS",value:c.days,key:"days"},{label:"HOURS",value:c.hours,key:"hours"},{label:"MINS",value:c.minutes,key:"minutes"},{label:"SECS",value:c.seconds,key:"seconds"}];return T?s.jsx("div",{className:"enhanced-countdown-wrapper",children:s.jsxs("div",{className:"countdown-impact-overlay",children:[s.jsx("div",{className:"impact-flash"}),s.jsx("div",{className:"impact-message",children:"THE MYSTERY BEGINS"})]})}):s.jsxs("div",{className:`enhanced-countdown-wrapper ${D?"shake":""}`,children:[s.jsxs("div",{className:"sr-only",children:[c.days," days, ",c.hours," hours, ",c.minutes," minutes, ",c.seconds," seconds remaining"]}),s.jsxs("div",{className:"countdown-fog-container","aria-hidden":"true",children:[s.jsx("div",{className:"countdown-fog fog-layer-1"}),s.jsx("div",{className:"countdown-fog fog-layer-3"})]}),s.jsx("div",{className:"ashes-container","aria-hidden":"true",children:M.map(e=>s.jsx("div",{className:`ash-particle ${e.size}`,style:{left:`${e.left}%`,animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`}},e.id))}),s.jsx("div",{className:"clue-icons-overlay","aria-hidden":"true",children:A.map(e=>s.jsx("span",{className:`clue-icon ${e.type}`,style:e.style,children:e.icon},e.type))}),s.jsxs("div",{className:`countdown-main ${N?"fade-in-wrapper":"opacity-0"}`,children:[s.jsxs("div",{className:"countdown-header-section",children:[s.jsx("h2",{className:"countdown-title scratched-text-heavy",children:"TIME REMAINING"}),s.jsx("p",{className:"countdown-subtitle scratched-text",children:"The investigation awaits..."})]}),s.jsx("div",{className:"countdown-timer-display",children:E.map((e,t)=>s.jsxs("div",{className:"countdown-unit",children:[t>0&&s.jsx("span",{className:"countdown-separator",children:":"}),s.jsxs("div",{className:"digit-box-container",children:[s.jsx("div",{className:"digit-card",children:s.jsx("span",{className:`digit-value ${j===e.key?"slice":""} ${S===e.key?"glitch":""} ${k===e.key?"flicker":""}`,children:String(e.value).padStart(2,"0")})}),s.jsx("span",{className:"digit-label",children:e.label})]})]},e.key))}),s.jsx("div",{className:"countdown-event-date scratched-text",children:"FEBRUARY 28 â€” MARCH 1, 2026"})]})]})};export{$ as default};
